{"version":3,"file":"togetherDrinkApi.js","sources":["utils/api/togetherDrinkApi.js"],"sourcesContent":["import { request } from '../request'\n\n/**\n * 创建邀请\n * @param {Object} data 请求数据\n * @param {string} data.userId 创建者用户ID\n * @param {string|number} data.productId 产品ID\n * @param {string} data.productName 产品名称\n * @param {string} data.productImage 产品图片\n * @param {number} data.productPrice 产品价格\n * @param {number} data.participantsLimit 参与人数限制\n * @param {string} [data.expireTime] 过期时间（可选）\n * @returns {Promise<Object>} 返回创建的邀请信息，包含invitationId和inviteCode\n */\nexport const createInvitation = (data) => {\n  console.log('【创建邀请】请求数据:', JSON.stringify(data, null, 2))\n  return request({\n    url: '/api/together-drink/invitations',\n    method: 'POST',\n    data\n  }).then(response => {\n    console.log('【创建邀请】成功响应:', JSON.stringify(response, null, 2))\n    return response\n  }).catch(error => {\n    console.error('【创建邀请】错误响应:', error)\n    throw error\n  })\n}\n\n/**\n * 获取邀请详情\n * @param {string} invitationId 邀请ID\n * @returns {Promise<Object>} 邀请详情\n */\nexport const getInvitationById = (invitationId) => {\n  return request({\n    url: `/api/together-drink/invitations/${invitationId}`,\n    method: 'GET'\n  })\n}\n\n/**\n * 通过邀请码获取邀请详情\n * @param {string} inviteCode 邀请码\n * @returns {Promise<Object>} 邀请详情\n */\nexport const getInvitationByCode = (inviteCode) => {\n  return request({\n    url: `/api/together-drink/invitations/code/${inviteCode}`,\n    method: 'GET'\n  })\n}\n\n/**\n * 加入邀请\n * @param {string} invitationId 邀请ID\n * @param {Object} data 请求数据\n * @param {string} data.userId 参与者用户ID\n * @returns {Promise<Object>} 加入结果\n */\nexport const joinInvitation = (invitationId, data) => {\n  console.log('【加入邀请】开始请求，邀请ID:', invitationId, '请求数据:', JSON.stringify(data))\n  return request({\n    url: `/api/together-drink/invitations/${invitationId}/join`,\n    method: 'POST',\n    data,\n    loading: true,\n    loadingText: '正在加入邀请...'\n  }).then(response => {\n    console.log('【加入邀请】成功响应:', JSON.stringify(response))\n    return response\n  }).catch(error => {\n    console.error('【加入邀请】请求失败:', error)\n    throw error\n  })\n}\n\n/**\n * 取消邀请\n * @param {string} invitationId 邀请ID\n * @param {Object} data 请求数据\n * @param {string} data.userId 取消者用户ID（必须是创建者）\n * @returns {Promise<Object>} 取消结果\n */\nexport const cancelInvitation = (invitationId, data) => {\n  return request({\n    url: `/api/together-drink/invitations/${invitationId}/cancel`,\n    method: 'PUT',\n    data\n  })\n}\n\n/**\n * 完成邀请并创建订单\n * @param {string} invitationId 邀请ID\n * @param {Object} data 请求数据\n * @param {string} data.orderAddress 订单配送地址\n * @returns {Promise<Object>} 创建的订单信息\n */\nexport const completeInvitation = (invitationId, data) => {\n  return request({\n    url: `/api/together-drink/invitations/${invitationId}/complete`,\n    method: 'POST',\n    data\n  })\n}\n\n/**\n * 获取用户参与的邀请\n * @param {string} userId 用户ID\n * @returns {Promise<Array>} 用户参与的邀请列表\n */\nexport const getUserInvitations = (userId) => {\n  return request({\n    url: `/api/together-drink/invitations/user/${userId}`,\n    method: 'GET'\n  })\n} "],"names":["uni","request"],"mappings":";;;AAcY,MAAC,mBAAmB,CAAC,SAAS;AACxCA,gBAAAA,0DAAY,eAAe,KAAK,UAAU,MAAM,MAAM,CAAC,CAAC;AACxD,SAAOC,sBAAQ;AAAA,IACb,KAAK;AAAA,IACL,QAAQ;AAAA,IACR;AAAA,EACJ,CAAG,EAAE,KAAK,cAAY;AAClBD,kBAAAA,MAAY,MAAA,OAAA,uCAAA,eAAe,KAAK,UAAU,UAAU,MAAM,CAAC,CAAC;AAC5D,WAAO;AAAA,EACX,CAAG,EAAE,MAAM,WAAS;AAChBA,kBAAAA,MAAc,MAAA,SAAA,uCAAA,eAAe,KAAK;AAClC,UAAM;AAAA,EACV,CAAG;AACH;AAOY,MAAC,oBAAoB,CAAC,iBAAiB;AACjD,SAAOC,sBAAQ;AAAA,IACb,KAAK,mCAAmC,YAAY;AAAA,IACpD,QAAQ;AAAA,EACZ,CAAG;AACH;AAOY,MAAC,sBAAsB,CAAC,eAAe;AACjD,SAAOA,sBAAQ;AAAA,IACb,KAAK,wCAAwC,UAAU;AAAA,IACvD,QAAQ;AAAA,EACZ,CAAG;AACH;AASY,MAAC,iBAAiB,CAAC,cAAc,SAAS;AACpDD,gBAAAA,MAAA,MAAA,OAAA,uCAAY,oBAAoB,cAAc,SAAS,KAAK,UAAU,IAAI,CAAC;AAC3E,SAAOC,sBAAQ;AAAA,IACb,KAAK,mCAAmC,YAAY;AAAA,IACpD,QAAQ;AAAA,IACR;AAAA,IACA,SAAS;AAAA,IACT,aAAa;AAAA,EACjB,CAAG,EAAE,KAAK,cAAY;AAClBD,4EAAY,eAAe,KAAK,UAAU,QAAQ,CAAC;AACnD,WAAO;AAAA,EACX,CAAG,EAAE,MAAM,WAAS;AAChBA,kBAAAA,MAAc,MAAA,SAAA,uCAAA,eAAe,KAAK;AAClC,UAAM;AAAA,EACV,CAAG;AACH;AASY,MAAC,mBAAmB,CAAC,cAAc,SAAS;AACtD,SAAOC,sBAAQ;AAAA,IACb,KAAK,mCAAmC,YAAY;AAAA,IACpD,QAAQ;AAAA,IACR;AAAA,EACJ,CAAG;AACH;AASY,MAAC,qBAAqB,CAAC,cAAc,SAAS;AACxD,SAAOA,sBAAQ;AAAA,IACb,KAAK,mCAAmC,YAAY;AAAA,IACpD,QAAQ;AAAA,IACR;AAAA,EACJ,CAAG;AACH;;;;;;;"}