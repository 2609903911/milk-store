{"version":3,"file":"aiPromptService.js","sources":["utils/aiPromptService.js"],"sourcesContent":["/**\n * AI提示服务\n * 为AI助手提供上下文和知识库\n */\n\nimport { userState } from './userState';\nimport { getProductList } from './productService';\n\n/**\n * 生成系统提示信息\n * @returns {String} 系统提示信息\n */\nexport const generateSystemPrompt = async () => {\n  // 获取产品信息\n  const products = await getProductList();\n  \n  // 基础提示信息\n  let prompt = `你是熊猫奶茶店的AI助手，负责回答用户关于奶茶产品、优惠活动、门店信息等问题。\n请保持友好、专业的态度，简明扼要地回答问题。所有回答必须使用中文。\n\n熊猫奶茶店的信息:\n- 成立时间: 2021年\n- 主营产品: 各类奶茶、果茶、特调饮品\n- 门店地址: 主城区共有15家门店\n- 营业时间: 早上10:00至晚上22:00\n- 配送范围: 门店3公里内免费配送`;\n\n  // 添加产品信息\n  if (products && products.length > 0) {\n    prompt += `\\n\\n主要产品列表:`;\n    products.slice(0, 10).forEach(product => {\n      prompt += `\\n- ${product.name}: ${product.price}元 (${product.description})`;\n    });\n  }\n  \n  // 添加当前优惠活动信息\n  prompt += `\\n\\n当前优惠活动:\n- 新用户首单立减5元\n- 会员日(每月1日和15日)全场8.5折\n- 下午茶时段(14:00-17:00)指定饮品第二杯半价\n- 集满10个印章可兑换任意一杯中杯饮品`;\n\n  // 添加用户信息(如果已登录)\n  if (userState && userState.userId && userState.userId.indexOf('guest_') === -1) {\n    prompt += `\\n\\n当前用户信息:\n- 会员等级: ${userState.memberLevel || 0}级\n- 积分: ${userState.points || 0}点\n- 优惠券数量: ${userState.coupons ? userState.coupons.length : 0}张`;\n  }\n  \n  return prompt;\n};\n\n/**\n * 获取常见问题和回答\n * @returns {Array} 问答对数组\n */\nexport const getCommonQA = () => {\n  return [\n    {\n      question: \"熊猫奶茶的招牌饮品是什么?\",\n      answer: \"我们的招牌饮品是'熊猫珍珠奶茶'和'杨梅吐气'，前者是经典奶茶配上Q弹珍珠，后者是杨梅汁与气泡水的清爽组合。\"\n    },\n    {\n      question: \"如何成为会员?\",\n      answer: \"您可以在我们的小程序或APP中注册账号，完成手机验证后即可成为会员，首次消费即可获得新人专属优惠。\"\n    },\n    {\n      question: \"有没有糖分低的饮品推荐?\",\n      answer: \"我们所有饮品都可以定制糖度，从无糖到全糖。特别推荐'乌龙青茶'和'满杯百香果'，这两款饮品即使选择低糖也不会影响口感。\"\n    }\n  ];\n}; "],"names":["getProductList","userState"],"mappings":";;;AAYY,MAAC,uBAAuB,YAAY;AAE9C,QAAM,WAAW,MAAMA,qBAAAA;AAGvB,MAAI,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWb,MAAI,YAAY,SAAS,SAAS,GAAG;AACnC,cAAU;AAAA;AAAA;AACV,aAAS,MAAM,GAAG,EAAE,EAAE,QAAQ,aAAW;AACvC,gBAAU;AAAA,IAAO,QAAQ,IAAI,KAAK,QAAQ,KAAK,MAAM,QAAQ,WAAW;AAAA,IAC9E,CAAK;AAAA,EACF;AAGD,YAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOV,MAAIC,gBAAS,aAAIA,0BAAU,UAAUA,gBAAS,UAAC,OAAO,QAAQ,QAAQ,MAAM,IAAI;AAC9E,cAAU;AAAA;AAAA;AAAA,UACJA,gBAAS,UAAC,eAAe,CAAC;AAAA,QAC5BA,gBAAS,UAAC,UAAU,CAAC;AAAA,WAClBA,gBAAAA,UAAU,UAAUA,gBAAS,UAAC,QAAQ,SAAS,CAAC;AAAA,EACxD;AAED,SAAO;AACT;;"}