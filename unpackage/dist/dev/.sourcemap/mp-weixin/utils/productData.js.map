{"version":3,"file":"productData.js","sources":["utils/productData.js"],"sourcesContent":["// 初始的产品数据\r\nconst defaultProductData = [\r\n    {\r\n        name: '招牌奶茶',\r\n        products: [\r\n            {\r\n                image: '/static/images/hot01.png',\r\n                name: '杨梅吐气',\r\n                desc: '杨梅与气泡水的完美融合',\r\n                price: 12.0\r\n            },\r\n            {\r\n                image: '/static/images/hot02.png',\r\n                name: '手作米麻薯',\r\n                desc: '手工制作的米麻薯，口感Q弹',\r\n                price: 10.0\r\n            },\r\n            {\r\n                image: '/static/images/hot03.png',\r\n                name: '满杯芭乐',\r\n                desc: '新鲜芭乐与气泡水的完美结合',\r\n                price: 15.0\r\n            },\r\n            {\r\n                image: '/static/images/hot04.png',\r\n                name: '抹茶奶绿',\r\n                desc: '抹茶与奶绿的清新搭配',\r\n                price: 10.0\r\n            },\r\n            {\r\n                image: '/static/images/hot05.png',\r\n                name: '喜凤梨',\r\n                desc: '凤梨与气泡水的甜蜜组合',\r\n                price: 12.0\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        name: '真鲜奶茶',\r\n        products: [\r\n            {\r\n                image: '/static/images/new01.png',\r\n                name: '经典奶茶',\r\n                desc: '选用进口奶源，醇香浓郁',\r\n                price: 15.0\r\n            },\r\n            {\r\n                image: '/static/images/new02.png',\r\n                name: '红豆奶茶',\r\n                desc: '香甜红豆与奶茶的经典搭配',\r\n                price: 18.0\r\n            },\r\n            {\r\n                image: '/static/images/new03.png',\r\n                name: '布丁奶茶',\r\n                desc: 'Q弹布丁与香浓奶茶的融合',\r\n                price: 20.0\r\n            },\r\n            {\r\n                image: '/static/images/new04.png',\r\n                name: '珍珠奶茶',\r\n                desc: '嚼劲十足的珍珠与奶茶的完美融合',\r\n                price: 16.0\r\n            },\r\n            {\r\n                image: '/static/images/new05.png',\r\n                name: '芋圆奶茶',\r\n                desc: 'Q弹芋圆与丝滑奶茶的组合',\r\n                price: 14.0\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        name: '新品种草',\r\n        products: [\r\n            {\r\n                image: '/static/images/classic01.png',\r\n                name: '芝芝莓莓',\r\n                desc: '草莓与芝士的梦幻搭配',\r\n                price: 22.0\r\n            },\r\n            {\r\n                image: '/static/images/classic02.png',\r\n                name: '多肉葡萄',\r\n                desc: '多肉与葡萄的创新组合',\r\n                price: 20.0\r\n            },\r\n            {\r\n                image: '/static/images/classic03.png',\r\n                name: '芒果雪冰',\r\n                desc: '新鲜芒果加上细腻雪冰',\r\n                price: 18.0\r\n            },\r\n            {\r\n                image: '/static/images/classic04.png',\r\n                name: '椰云拿铁',\r\n                desc: '丝滑拿铁与椰云的结合',\r\n                price: 16.0\r\n            },\r\n            {\r\n                image: '/static/images/classic05.png',\r\n                name: '桃桃乌龙',\r\n                desc: '乌龙茶与水蜜桃的清新口味',\r\n                price: 19.0\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        name: '清爽鲜果茶',\r\n        products: [\r\n            {\r\n                image: '/static/images/fruit01.png',\r\n                name: '满杯百香',\r\n                desc: '新鲜百香果，酸甜可口',\r\n                price: 16.0\r\n            },\r\n            {\r\n                image: '/static/images/fruit02.png',\r\n                name: '柠檬绿茶',\r\n                desc: '清新柠檬与绿茶的搭配',\r\n                price: 14.0\r\n            },\r\n            {\r\n                image: '/static/images/fruit03.png',\r\n                name: '蜜桃乌龙',\r\n                desc: '香甜蜜桃与乌龙茶的结合',\r\n                price: 18.0\r\n            },\r\n            {\r\n                image: '/static/images/fruit04.png',\r\n                name: '金桔柠檬',\r\n                desc: '酸甜可口的金桔柠檬',\r\n                price: 15.0\r\n            },\r\n            {\r\n                image: '/static/images/fruit05.png',\r\n                name: '青提乌龙',\r\n                desc: '清爽青提与醇香乌龙茶',\r\n                price: 17.0\r\n            }\r\n        ]\r\n    }\r\n]\r\n\r\n// 存储键名\r\nconst STORAGE_KEY = 'milk_tea_products'\r\n\r\n// 保存产品数据到本地存储\r\nexport const saveProductData = (data) => {\r\n    try {\r\n        uni.setStorageSync(STORAGE_KEY, JSON.stringify(data))\r\n        console.log('产品数据保存成功')\r\n        return true\r\n    } catch (e) {\r\n        console.error('保存产品数据失败：', e)\r\n        return false\r\n    }\r\n}\r\n\r\n// 从本地存储获取产品数据\r\nexport const getProductData = () => {\r\n    try {\r\n        const storageData = uni.getStorageSync(STORAGE_KEY)\r\n        if (storageData) {\r\n            return JSON.parse(storageData)\r\n        } else {\r\n            // 如果本地没有数据，初始化并存储默认数据\r\n            saveProductData(defaultProductData)\r\n            return defaultProductData\r\n        }\r\n    } catch (e) {\r\n        console.error('获取产品数据失败：', e)\r\n        return defaultProductData\r\n    }\r\n}\r\n\r\n// 重置产品数据为默认数据\r\nexport const resetProductData = () => {\r\n    return saveProductData(defaultProductData)\r\n}\r\n\r\n// 更新特定产品信息\r\nexport const updateProduct = (categoryIndex, productIndex, updatedProduct) => {\r\n    try {\r\n        const allProducts = getProductData()\r\n        \r\n        // 确保索引有效\r\n        if (categoryIndex >= 0 && \r\n            categoryIndex < allProducts.length && \r\n            productIndex >= 0 && \r\n            productIndex < allProducts[categoryIndex].products.length) {\r\n            \r\n            // 更新产品\r\n            allProducts[categoryIndex].products[productIndex] = {\r\n                ...allProducts[categoryIndex].products[productIndex],\r\n                ...updatedProduct\r\n            }\r\n            \r\n            // 保存更新后的数据\r\n            return saveProductData(allProducts)\r\n        }\r\n        return false\r\n    } catch (e) {\r\n        console.error('更新产品失败：', e)\r\n        return false\r\n    }\r\n}\r\n\r\n// 添加新产品到指定分类\r\nexport const addProduct = (categoryIndex, newProduct) => {\r\n    try {\r\n        const allProducts = getProductData()\r\n        \r\n        // 确保分类索引有效\r\n        if (categoryIndex >= 0 && categoryIndex < allProducts.length) {\r\n            // 添加新产品\r\n            allProducts[categoryIndex].products.push(newProduct)\r\n            \r\n            // 保存更新后的数据\r\n            return saveProductData(allProducts)\r\n        }\r\n        return false\r\n    } catch (e) {\r\n        console.error('添加产品失败：', e)\r\n        return false\r\n    }\r\n}\r\n\r\n// 删除产品\r\nexport const deleteProduct = (categoryIndex, productIndex) => {\r\n    try {\r\n        const allProducts = getProductData()\r\n        \r\n        // 确保索引有效\r\n        if (categoryIndex >= 0 && \r\n            categoryIndex < allProducts.length && \r\n            productIndex >= 0 && \r\n            productIndex < allProducts[categoryIndex].products.length) {\r\n            \r\n            // 删除产品\r\n            allProducts[categoryIndex].products.splice(productIndex, 1)\r\n            \r\n            // 保存更新后的数据\r\n            return saveProductData(allProducts)\r\n        }\r\n        return false\r\n    } catch (e) {\r\n        console.error('删除产品失败：', e)\r\n        return false\r\n    }\r\n}\r\n\r\n// 添加新分类\r\nexport const addCategory = (newCategory) => {\r\n    try {\r\n        const allProducts = getProductData()\r\n        \r\n        // 添加新分类\r\n        allProducts.push({\r\n            name: newCategory,\r\n            products: []\r\n        })\r\n        \r\n        // 保存更新后的数据\r\n        return saveProductData(allProducts)\r\n    } catch (e) {\r\n        console.error('添加分类失败：', e)\r\n        return false\r\n    }\r\n}\r\n\r\n// 删除分类\r\nexport const deleteCategory = (categoryIndex) => {\r\n    try {\r\n        const allProducts = getProductData()\r\n        \r\n        // 确保分类索引有效\r\n        if (categoryIndex >= 0 && categoryIndex < allProducts.length) {\r\n            // 删除分类\r\n            allProducts.splice(categoryIndex, 1)\r\n            \r\n            // 保存更新后的数据\r\n            return saveProductData(allProducts)\r\n        }\r\n        return false\r\n    } catch (e) {\r\n        console.error('删除分类失败：', e)\r\n        return false\r\n    }\r\n}\r\n\r\n// 搜索产品\r\nexport const searchProducts = (keyword) => {\r\n    try {\r\n        if (!keyword) return []\r\n        \r\n        const allProducts = getProductData()\r\n        const results = []\r\n        \r\n        // 搜索所有分类中的产品\r\n        allProducts.forEach(category => {\r\n            const matchedProducts = category.products.filter(product => \r\n                product.name.includes(keyword) || \r\n                product.desc.includes(keyword)\r\n            )\r\n            \r\n            if (matchedProducts.length > 0) {\r\n                matchedProducts.forEach(product => {\r\n                    results.push({\r\n                        ...product,\r\n                        category: category.name\r\n                    })\r\n                })\r\n            }\r\n        })\r\n        \r\n        return results\r\n    } catch (e) {\r\n        console.error('搜索产品失败：', e)\r\n        return []\r\n    }\r\n}\r\n\r\n// 初始化数据，确保第一次使用时本地存储有数据\r\nexport const initProductData = () => {\r\n    const existingData = uni.getStorageSync(STORAGE_KEY)\r\n    if (!existingData) {\r\n        saveProductData(defaultProductData)\r\n    }\r\n    return true\r\n}\r\n\r\n// 默认导出\r\nexport default {\r\n    getProductData,\r\n    saveProductData,\r\n    resetProductData,\r\n    updateProduct,\r\n    addProduct,\r\n    deleteProduct,\r\n    addCategory,\r\n    deleteCategory,\r\n    searchProducts,\r\n    initProductData\r\n} "],"names":["uni"],"mappings":"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"}